syntax = "proto3";

package muninn;

import "raven.proto";

// MuninnTTSService - Service for Text-to-Speech
service MuninnTTSService {
  // Generate speech from text
  rpc GenerateSpeech(TTSRequest) returns (TTSResponse);
  
  // Generate speech with streaming output
  rpc GenerateSpeechStream(TTSRequest) returns (stream TTSStreamChunk);
}

// TTSRequest - Request to generate speech
message TTSRequest {
  string text = 1;
  string language = 2;
  TTSVoice voice = 3;
  TTSSettings settings = 4;
  string user_id = 5;
  string device_id = 6;
}

// TTSVoice - Voice configuration
enum TTSVoice {
  MALE = 0;
  FEMALE = 1;
  NEUTRAL = 2;
}

// TTSSettings - TTS generation settings
message TTSSettings {
  float speed = 1;        // Speech speed (0.5 - 2.0, default 1.0)
  float pitch = 2;        // Voice pitch (-20.0 to 20.0, default 0.0)
  float volume = 3;       // Volume (0.0 - 1.0, default 1.0)
  string audio_format = 4; // Output format: "wav", "mp3", "opus"
  int32 sample_rate = 5;   // Sample rate (16000, 44100, 48000)
}

// TTSResponse - Response with generated audio
message TTSResponse {
  bytes audio_data = 1;
  string audio_format = 2;
  int32 sample_rate = 3;
  int32 channels = 4;
  int32 duration_ms = 5;
  bool success = 6;
  string error_message = 7;
}

// TTSStreamChunk - Streaming audio chunk
message TTSStreamChunk {
  bytes audio_chunk = 1;
  int32 chunk_index = 2;
  bool is_last = 3;
}
